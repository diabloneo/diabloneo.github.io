<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>理解Golang程序(1) -- 基础</title>
  <meta name="description" content="为什么写这个系列">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://diabloneo.github.io//2016/11/01/understanding-golang-internals-1.html">
  <link rel="alternate" type="application/rss+xml" title="Coffee, Coke and Code" href="http://diabloneo.github.io//feed.xml">
</head>


  <body>
    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Coffee, Coke and Code</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
        
        <a href="/feed.xml">RSS</a>
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">理解Golang程序(1) -- 基础</h1>
    <p class="post-meta"><time datetime="2016-11-01T00:00:00+08:00" itemprop="datePublished">Nov 1, 2016</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <h1 id="为什么写这个系列">为什么写这个系列</h1>

<p>这个系列的文章是希望能帮助读者从Go汇编的层面更好的理解一个Golang程序。笔者刚工作的时候用的是C语言，深刻的感到理解一个程序的汇编代码对于编程的是非常有帮助的（这个也是读了<a href="http://product.china-pub.com/216981">深入理解计算机系统</a>之后才意识到这个问题）。所以，笔者觉得，要想更好的使用Golang，也应该理解其汇编层面的东西（这里说的汇编是指Golang工具链使用的汇编格式）。<!--more--></p>

<h1 id="环境">环境</h1>

<p>Golang自带的工具就能够帮助我们理解其汇编代码了，我们只需要建立一个简单的编程环境即可。 <strong>Golang上个月刚刚发布了1.7版本</strong>，所以本系列也会使用go1.7。主要的环境设置如下：</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">➜ ~  <span class="nv">$ </span>go version
go version go1.7 linux/amd64
➜ ~  <span class="nv">$ </span>go env
<span class="nv">GOARCH</span><span class="o">=</span><span class="s2">"amd64"</span>
<span class="nv">GOBIN</span><span class="o">=</span><span class="s2">""</span>
<span class="nv">GOEXE</span><span class="o">=</span><span class="s2">""</span>
<span class="nv">GOHOSTARCH</span><span class="o">=</span><span class="s2">"amd64"</span>
<span class="nv">GOHOSTOS</span><span class="o">=</span><span class="s2">"linux"</span>
<span class="nv">GOOS</span><span class="o">=</span><span class="s2">"linux"</span>
<span class="nv">GOPATH</span><span class="o">=</span><span class="s2">"/home/diabloneo/go"</span>
<span class="nv">GORACE</span><span class="o">=</span><span class="s2">""</span>
<span class="nv">GOROOT</span><span class="o">=</span><span class="s2">"/opt/go"</span>
<span class="nv">GOTOOLDIR</span><span class="o">=</span><span class="s2">"/opt/go/pkg/tool/linux_amd64"</span></code></pre></figure>

<p>然后，我们建议一个本地的代码目录用来存放实验代码：</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">➜ ~  <span class="nv">$ </span><span class="nb">cd </span>go/src
➜ ~/go/src  <span class="nv">$ </span>mkdir -p goexamples/hello
➜ ~/go/src  <span class="nv">$ </span><span class="nb">cd </span>goexamples/hello
➜ ~/go/src/goexamples/hello  <span class="err">$</span></code></pre></figure>

<p>后面的实验代码都会存放在 <em>${GOPATH}/goexamples/src</em>这个目录下。</p>

<h1 id="编译和反汇编">编译和反汇编</h1>

<p>编译Golang程序，一般是用 <strong>go build</strong>工具，不过为了查看汇编代码，我们需要使用 <strong>go tool compile</strong>工具。其实 <strong>go build</strong>也是使用了 <strong>go tool compile</strong>和 <strong>go tool link</strong>工具，一个负责编译，一个负责链接。</p>

<p>先写个 <em>hello, world</em> 程序 <em>goexamples/hello/hello.go</em> ，在程序里定义一个看起来没用的 <code class="highlighter-rouge">foo()</code>函数：</p>

<figure class="highlight"><pre><code class="language-go" data-lang="go"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre></td><td class="code"><pre><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
	</span><span class="s">"fmt"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">foo</span><span class="p">()</span><span class="x"> </span><span class="kt">int</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="k">var</span><span class="x"> </span><span class="n">a</span><span class="x"> </span><span class="kt">int</span><span class="x">
	</span><span class="k">return</span><span class="x"> </span><span class="n">a</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"hello, world</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>接下来，我们可以执行编译该文件来得到该文件的汇编代码，执行命令<code class="highlighter-rouge">go tool compile -S hello.go</code>：</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">➜ ~/go/src/goexamples/hello  <span class="nv">$ </span>go tool compile -S hello.go
<span class="s2">""</span>.foo <span class="nv">t</span><span class="o">=</span>1 <span class="nv">size</span><span class="o">=</span>10 <span class="nv">args</span><span class="o">=</span>0x8 <span class="nv">locals</span><span class="o">=</span>0x0
        0x0000 00000 <span class="o">(</span>hello.go:7<span class="o">)</span>       TEXT    <span class="s2">""</span>.foo<span class="o">(</span>SB<span class="o">)</span>, <span class="nv">$0</span>-8
        0x0000 00000 <span class="o">(</span>hello.go:7<span class="o">)</span>       NOP
        0x0000 00000 <span class="o">(</span>hello.go:7<span class="o">)</span>       NOP
        0x0000 00000 <span class="o">(</span>hello.go:7<span class="o">)</span>       FUNCDATA        <span class="nv">$0</span>, gclocals·5184031d3a32a42d85027f073f873668<span class="o">(</span>SB<span class="o">)</span>
        0x0000 00000 <span class="o">(</span>hello.go:7<span class="o">)</span>       FUNCDATA        <span class="nv">$1</span>, gclocals·33cdeccccebe80329f1fdbee7f5874cb<span class="o">(</span>SB<span class="o">)</span>
        0x0000 00000 <span class="o">(</span>hello.go:9<span class="o">)</span>       MOVQ    <span class="nv">$0</span>, <span class="s2">""</span>.~r0+8<span class="o">(</span>FP<span class="o">)</span>
        0x0009 00009 <span class="o">(</span>hello.go:9<span class="o">)</span>       RET
        0x0000 48 c7 44 24 08 00 00 00 00 c3                    H.D<span class="nv">$.</span>.....
<span class="s2">""</span>.main <span class="nv">t</span><span class="o">=</span>1 <span class="nv">size</span><span class="o">=</span>98 <span class="nv">args</span><span class="o">=</span>0x0 <span class="nv">locals</span><span class="o">=</span>0x48
        0x0000 00000 <span class="o">(</span>hello.go:12<span class="o">)</span>      TEXT    <span class="s2">""</span>.main<span class="o">(</span>SB<span class="o">)</span>, <span class="nv">$72</span>-0
        0x0000 00000 <span class="o">(</span>hello.go:12<span class="o">)</span>      MOVQ    <span class="o">(</span>TLS<span class="o">)</span>, CX
        0x0009 00009 <span class="o">(</span>hello.go:12<span class="o">)</span>      CMPQ    SP, 16<span class="o">(</span>CX<span class="o">)</span>
        0x000d 00013 <span class="o">(</span>hello.go:12<span class="o">)</span>      JLS     91
        0x000f 00015 <span class="o">(</span>hello.go:12<span class="o">)</span>      SUBQ    <span class="nv">$72</span>, SP
        0x0013 00019 <span class="o">(</span>hello.go:12<span class="o">)</span>      MOVQ    BP, 64<span class="o">(</span>SP<span class="o">)</span>
        0x0018 00024 <span class="o">(</span>hello.go:12<span class="o">)</span>      LEAQ    64<span class="o">(</span>SP<span class="o">)</span>, BP
        0x001d 00029 <span class="o">(</span>hello.go:12<span class="o">)</span>      FUNCDATA        <span class="nv">$0</span>, gclocals·33cdeccccebe80329f1fdbee7f5874cb<span class="o">(</span>SB<span class="o">)</span>
        0x001d 00029 <span class="o">(</span>hello.go:12<span class="o">)</span>      FUNCDATA        <span class="nv">$1</span>, gclocals·33cdeccccebe80329f1fdbee7f5874cb<span class="o">(</span>SB<span class="o">)</span>
        0x001d 00029 <span class="o">(</span>hello.go:13<span class="o">)</span>      LEAQ    go.string.<span class="s2">"hello, world</span><span class="se">\n</span><span class="s2">"</span><span class="o">(</span>SB<span class="o">)</span>, AX
        0x0024 00036 <span class="o">(</span>hello.go:13<span class="o">)</span>      MOVQ    AX, <span class="o">(</span>SP<span class="o">)</span>
        0x0028 00040 <span class="o">(</span>hello.go:13<span class="o">)</span>      MOVQ    <span class="nv">$13</span>, 8<span class="o">(</span>SP<span class="o">)</span>
        0x0031 00049 <span class="o">(</span>hello.go:13<span class="o">)</span>      MOVQ    <span class="nv">$0</span>, 16<span class="o">(</span>SP<span class="o">)</span>
        0x003a 00058 <span class="o">(</span>hello.go:13<span class="o">)</span>      MOVQ    <span class="nv">$0</span>, 24<span class="o">(</span>SP<span class="o">)</span>
        0x0043 00067 <span class="o">(</span>hello.go:13<span class="o">)</span>      MOVQ    <span class="nv">$0</span>, 32<span class="o">(</span>SP<span class="o">)</span>
        0x004c 00076 <span class="o">(</span>hello.go:13<span class="o">)</span>      PCDATA  <span class="nv">$0</span>, <span class="nv">$0</span>
        0x004c 00076 <span class="o">(</span>hello.go:13<span class="o">)</span>      CALL    fmt.Printf<span class="o">(</span>SB<span class="o">)</span>
        0x0051 00081 <span class="o">(</span>hello.go:14<span class="o">)</span>      MOVQ    64<span class="o">(</span>SP<span class="o">)</span>, BP
        0x0056 00086 <span class="o">(</span>hello.go:14<span class="o">)</span>      ADDQ    <span class="nv">$72</span>, SP
        0x005a 00090 <span class="o">(</span>hello.go:14<span class="o">)</span>      RET
        0x005b 00091 <span class="o">(</span>hello.go:14<span class="o">)</span>      NOP
        0x005b 00091 <span class="o">(</span>hello.go:12<span class="o">)</span>      CALL    runtime.morestack_noctxt<span class="o">(</span>SB<span class="o">)</span>
        0x0060 00096 <span class="o">(</span>hello.go:12<span class="o">)</span>      JMP     0
        0x0000 64 48 8b 0c 25 00 00 00 00 48 3b 61 10 76 4c 48  dH..%....H;a.vLH
        0x0010 83 ec 48 48 89 6c 24 40 48 8d 6c 24 40 48 8d 05  ..HH.l<span class="nv">$@</span>H.l<span class="nv">$@</span>H..
        0x0020 00 00 00 00 48 89 04 24 48 c7 44 24 08 0d 00 00  ....H..<span class="nv">$H</span>.D<span class="nv">$.</span>...
        0x0030 00 48 c7 44 24 10 00 00 00 00 48 c7 44 24 18 00  .H.D<span class="nv">$.</span>....H.D<span class="nv">$.</span>.
        0x0040 00 00 00 48 c7 44 24 20 00 00 00 00 e8 00 00 00  ...H.D<span class="nv">$ </span>........
        0x0050 00 48 8b 6c 24 40 48 83 c4 48 c3 e8 00 00 00 00  .H.l<span class="nv">$@</span>H..H......
        0x0060 eb 9e                                            ..
        rel 5+4 <span class="nv">t</span><span class="o">=</span>15 TLS+0
        rel 32+4 <span class="nv">t</span><span class="o">=</span>14 go.string.<span class="s2">"hello, world</span><span class="se">\n</span><span class="s2">"</span>+0
        rel 77+4 <span class="nv">t</span><span class="o">=</span>7 fmt.Printf+0
        rel 92+4 <span class="nv">t</span><span class="o">=</span>7 runtime.morestack_noctxt+0
<span class="s2">""</span>.init <span class="nv">t</span><span class="o">=</span>1 <span class="nv">size</span><span class="o">=</span>61 <span class="nv">args</span><span class="o">=</span>0x0 <span class="nv">locals</span><span class="o">=</span>0x0
        0x0000 00000 <span class="o">(</span>hello.go:15<span class="o">)</span>      TEXT    <span class="s2">""</span>.init<span class="o">(</span>SB<span class="o">)</span>, <span class="nv">$0</span>-0
        0x0000 00000 <span class="o">(</span>hello.go:15<span class="o">)</span>      MOVQ    <span class="o">(</span>TLS<span class="o">)</span>, CX
        0x0009 00009 <span class="o">(</span>hello.go:15<span class="o">)</span>      CMPQ    SP, 16<span class="o">(</span>CX<span class="o">)</span>
        0x000d 00013 <span class="o">(</span>hello.go:15<span class="o">)</span>      JLS     54
        0x000f 00015 <span class="o">(</span>hello.go:15<span class="o">)</span>      NOP
        0x000f 00015 <span class="o">(</span>hello.go:15<span class="o">)</span>      NOP
        0x000f 00015 <span class="o">(</span>hello.go:15<span class="o">)</span>      FUNCDATA        <span class="nv">$0</span>, gclocals·33cdeccccebe80329f1fdbee7f5874cb<span class="o">(</span>SB<span class="o">)</span>
        0x000f 00015 <span class="o">(</span>hello.go:15<span class="o">)</span>      FUNCDATA        <span class="nv">$1</span>, gclocals·33cdeccccebe80329f1fdbee7f5874cb<span class="o">(</span>SB<span class="o">)</span>
        0x000f 00015 <span class="o">(</span>hello.go:15<span class="o">)</span>      MOVBLZX <span class="s2">""</span>.initdone·<span class="o">(</span>SB<span class="o">)</span>, AX
        0x0016 00022 <span class="o">(</span>hello.go:15<span class="o">)</span>      CMPB    AL, <span class="nv">$1</span>
        0x0018 00024 <span class="o">(</span>hello.go:15<span class="o">)</span>      JLS     <span class="nv">$0</span>, 27
        0x001a 00026 <span class="o">(</span>hello.go:15<span class="o">)</span>      RET
        0x001b 00027 <span class="o">(</span>hello.go:15<span class="o">)</span>      JNE     <span class="nv">$0</span>, 34
        0x001d 00029 <span class="o">(</span>hello.go:15<span class="o">)</span>      PCDATA  <span class="nv">$0</span>, <span class="nv">$0</span>
        0x001d 00029 <span class="o">(</span>hello.go:15<span class="o">)</span>      CALL    runtime.throwinit<span class="o">(</span>SB<span class="o">)</span>
        0x0022 00034 <span class="o">(</span>hello.go:15<span class="o">)</span>      MOVB    <span class="nv">$1</span>, <span class="s2">""</span>.initdone·<span class="o">(</span>SB<span class="o">)</span>
        0x0029 00041 <span class="o">(</span>hello.go:15<span class="o">)</span>      PCDATA  <span class="nv">$0</span>, <span class="nv">$0</span>
        0x0029 00041 <span class="o">(</span>hello.go:15<span class="o">)</span>      CALL    fmt.init<span class="o">(</span>SB<span class="o">)</span>
        0x002e 00046 <span class="o">(</span>hello.go:15<span class="o">)</span>      MOVB    <span class="nv">$2</span>, <span class="s2">""</span>.initdone·<span class="o">(</span>SB<span class="o">)</span>
        0x0035 00053 <span class="o">(</span>hello.go:15<span class="o">)</span>      RET
        0x0036 00054 <span class="o">(</span>hello.go:15<span class="o">)</span>      NOP
        0x0036 00054 <span class="o">(</span>hello.go:15<span class="o">)</span>      CALL    runtime.morestack_noctxt<span class="o">(</span>SB<span class="o">)</span>
        0x003b 00059 <span class="o">(</span>hello.go:15<span class="o">)</span>      JMP     0
        0x0000 64 48 8b 0c 25 00 00 00 00 48 3b 61 10 76 27 0f  dH..%....H;a.v<span class="s1">'.
        0x0010 b6 05 00 00 00 00 3c 01 76 01 c3 75 05 e8 00 00  ......&lt;.v..u....
        0x0020 00 00 c6 05 00 00 00 00 01 e8 00 00 00 00 c6 05  ................
        0x0030 00 00 00 00 02 c3 e8 00 00 00 00 eb c3           .............
        rel 5+4 t=15 TLS+0
        rel 18+4 t=14 "".initdone·+0
        rel 30+4 t=7 runtime.throwinit+0
        rel 36+4 t=14 "".initdone·+-1
        rel 42+4 t=7 fmt.init+0
        rel 48+4 t=14 "".initdone·+-1
        rel 55+4 t=7 runtime.morestack_noctxt+0
gclocals·33cdeccccebe80329f1fdbee7f5874cb t=9 dupok size=8
        0x0000 01 00 00 00 00 00 00 00                          ........
gclocals·5184031d3a32a42d85027f073f873668 t=9 dupok size=12
        0x0000 01 00 00 00 01 00 00 00 00 00 00 00              ............
go.string.hdr."hello, world\n" t=9 dupok size=16
        0x0000 00 00 00 00 00 00 00 00 0d 00 00 00 00 00 00 00  ................
        rel 0+8 t=1 go.string."hello, world\n"+0
go.string."hello, world\n" t=9 dupok size=13
        0x0000 68 65 6c 6c 6f 2c 20 77 6f 72 6c 64 0a           hello, world.
"".initdone· t=34 size=1
"".foo·f t=9 dupok size=8
        0x0000 00 00 00 00 00 00 00 00                          ........
        rel 0+8 t=1 "".foo+0
"".main·f t=9 dupok size=8
        0x0000 00 00 00 00 00 00 00 00                          ........
        rel 0+8 t=1 "".main+0
"".init·f t=9 dupok size=8
        0x0000 00 00 00 00 00 00 00 00                          ........
        rel 0+8 t=1 "".init+0
type..importpath.fmt. t=9 dupok size=6
        0x0000 00 00 03 66 6d 74                                ...fmt</span></code></pre></figure>

<p>现在我们得到了这个文件的汇编代码，可以看到这个代码里不仅有汇编指令，还有很多Golang实现相关的东西。现在，作为起步，我们先来看一些基本的内容：</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="s2">""</span>.foo <span class="nv">t</span><span class="o">=</span>1 <span class="nv">size</span><span class="o">=</span>10 <span class="nv">args</span><span class="o">=</span>0x8 <span class="nv">locals</span><span class="o">=</span>0x0
...
<span class="s2">""</span>.main <span class="nv">t</span><span class="o">=</span>1 <span class="nv">size</span><span class="o">=</span>98 <span class="nv">args</span><span class="o">=</span>0x0 <span class="nv">locals</span><span class="o">=</span>0x48
...</code></pre></figure>

<p>上面两行就是我们定义的两个函数：<code class="highlighter-rouge">main()</code>和<code class="highlighter-rouge">foo()</code>，跟在这两行后面的是两个函数的内容。为了方便阐述，这里会把要研究的代码都写在<code class="highlighter-rouge">foo()</code>函数内。</p>

<p>接下来，我们需要 <strong>关系编译优化</strong>。Golang的编译器在编译的时候会执行一些默认的优化，这会提升性能和节约空间，但是会使得汇编代码和Golang代码对应不起来，所以我们要先关闭这个优化，然后才能更好的研究汇编代码。关闭优化需要传递 <strong>-N</strong>选项给编译器：</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">➜ ~/go/src/goexamples/hello  <span class="nv">$ </span>go tool compile -N -S hello.go</code></pre></figure>

<p>这样得到的汇编输出会和前面略有不同，可以通过对比<code class="highlighter-rouge">foo()</code>函数的汇编代码来看到这些不同点：</p>

<p><strong>有优化</strong></p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="s2">""</span>.foo <span class="nv">t</span><span class="o">=</span>1 <span class="nv">size</span><span class="o">=</span>10 <span class="nv">args</span><span class="o">=</span>0x8 <span class="nv">locals</span><span class="o">=</span>0x0
        0x0000 00000 <span class="o">(</span>hello.go:7<span class="o">)</span>       TEXT    <span class="s2">""</span>.foo<span class="o">(</span>SB<span class="o">)</span>, <span class="nv">$0</span>-8
        0x0000 00000 <span class="o">(</span>hello.go:7<span class="o">)</span>       NOP
        0x0000 00000 <span class="o">(</span>hello.go:7<span class="o">)</span>       NOP
        0x0000 00000 <span class="o">(</span>hello.go:7<span class="o">)</span>       FUNCDATA        <span class="nv">$0</span>, gclocals·5184031d3a32a42d85027f073f873668<span class="o">(</span>SB<span class="o">)</span>
        0x0000 00000 <span class="o">(</span>hello.go:7<span class="o">)</span>       FUNCDATA        <span class="nv">$1</span>, gclocals·33cdeccccebe80329f1fdbee7f5874cb<span class="o">(</span>SB<span class="o">)</span>
        0x0000 00000 <span class="o">(</span>hello.go:9<span class="o">)</span>       MOVQ    <span class="nv">$0</span>, <span class="s2">""</span>.~r0+8<span class="o">(</span>FP<span class="o">)</span>
        0x0009 00009 <span class="o">(</span>hello.go:9<span class="o">)</span>       RET
        0x0000 48 c7 44 24 08 00 00 00 00 c3                    H.D<span class="nv">$.</span>.....</code></pre></figure>

<p><strong>无优化</strong></p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="s2">""</span>.foo <span class="nv">t</span><span class="o">=</span>1 <span class="nv">size</span><span class="o">=</span>50 <span class="nv">args</span><span class="o">=</span>0x8 <span class="nv">locals</span><span class="o">=</span>0x10
        0x0000 00000 <span class="o">(</span>hello.go:7<span class="o">)</span>       TEXT    <span class="s2">""</span>.foo<span class="o">(</span>SB<span class="o">)</span>, <span class="nv">$16</span>-8
        0x0000 00000 <span class="o">(</span>hello.go:7<span class="o">)</span>       SUBQ    <span class="nv">$16</span>, SP
        0x0004 00004 <span class="o">(</span>hello.go:7<span class="o">)</span>       MOVQ    BP, 8<span class="o">(</span>SP<span class="o">)</span>
        0x0009 00009 <span class="o">(</span>hello.go:7<span class="o">)</span>       LEAQ    8<span class="o">(</span>SP<span class="o">)</span>, BP
        0x000e 00014 <span class="o">(</span>hello.go:7<span class="o">)</span>       FUNCDATA        <span class="nv">$0</span>, gclocals·5184031d3a32a42d85027f073f873668<span class="o">(</span>SB<span class="o">)</span>
        0x000e 00014 <span class="o">(</span>hello.go:7<span class="o">)</span>       FUNCDATA        <span class="nv">$1</span>, gclocals·33cdeccccebe80329f1fdbee7f5874cb<span class="o">(</span>SB<span class="o">)</span>
        0x000e 00014 <span class="o">(</span>hello.go:7<span class="o">)</span>       MOVQ    <span class="nv">$0</span>, <span class="s2">""</span>.~r0+24<span class="o">(</span>FP<span class="o">)</span>
        0x0017 00023 <span class="o">(</span>hello.go:8<span class="o">)</span>       MOVQ    <span class="nv">$0</span>, <span class="s2">""</span>.a<span class="o">(</span>SP<span class="o">)</span>
        0x001f 00031 <span class="o">(</span>hello.go:9<span class="o">)</span>       MOVQ    <span class="nv">$0</span>, <span class="s2">""</span>.~r0+24<span class="o">(</span>FP<span class="o">)</span>
        0x0028 00040 <span class="o">(</span>hello.go:9<span class="o">)</span>       MOVQ    8<span class="o">(</span>SP<span class="o">)</span>, BP
        0x002d 00045 <span class="o">(</span>hello.go:9<span class="o">)</span>       ADDQ    <span class="nv">$16</span>, SP
        0x0031 00049 <span class="o">(</span>hello.go:9<span class="o">)</span>       RET
        0x0000 48 83 ec 10 48 89 6c 24 08 48 8d 6c 24 08 48 c7  H...H.l<span class="nv">$.</span>H.l<span class="nv">$.</span>H.
        0x0010 44 24 18 00 00 00 00 48 c7 04 24 00 00 00 00 48  D<span class="nv">$.</span>....H..<span class="nv">$.</span>...H
        0x0020 c7 44 24 18 00 00 00 00 48 8b 6c 24 08 48 83 c4  .D<span class="nv">$.</span>....H.l<span class="nv">$.</span>H..
        0x0030 10 c3                                            ..</code></pre></figure>

<p>可以看出，无优化的代码更长，包含了函数完整的栈帧操作。后续我们会一步一步的研究Golang的代码和无优化的汇编代码之间的关系，以帮助读者更好的理解Golang。</p>

<h1 id="golang汇编基础">Golang汇编基础</h1>

<p>Golang的汇编器采用的是Plan 9的汇编语法，官方有一篇关于Golang汇编器的快速入门：<a href="https://golang.org/doc/asm">A Quick Guide to Go’s Assembler</a>，其中介绍了一些简单的语法。在开始研究Golang的汇编代码之前，我们也需要先了解一下基本的语法。</p>

<h2 id="伪寄存器">伪寄存器</h2>

<p>Golang汇编中有4个伪寄存器，这些伪寄存器是由Golang工具链维护的。这4个伪寄存器是：</p>

<ul>
  <li><strong>FP</strong>: Frame pointer：栈帧寄存器，指向参数和本地变量。</li>
  <li><strong>PC</strong>：Program counter：程序计数器，用来进行跳转处理。</li>
  <li><strong>SB</strong>：Static base pointer：全局符号表。</li>
  <li><strong>SP</strong>：Stack pointer：栈顶指针。</li>
</ul>

<p><strong>SB</strong>寄存器的常用语法有以下几种：</p>

<ul>
  <li><strong>foo(SB)</strong>是全局变量foo的地址</li>
  <li><strong>foo&lt;&gt;(SB)</strong>是只在当前源文件可见的变量foo的地址</li>
  <li><strong>foo+4(SB)</strong>是全局变量foo的地址偏移4字节的地址</li>
</ul>

<p><strong>FP</strong>寄存器是用来访问函数参数的，理论上来说，<strong>0(FP)</strong>是第一个参数，<strong>8(FP)</strong>是第二个参数（64位系统）。但是，实际使用时，需要把参数名加进去：</p>

<ul>
  <li><strong>first_arg+0(FP)</strong></li>
  <li><strong>second_arg+8(FP)</strong></li>
</ul>

<p><strong>SP</strong>寄存器是一个虚拟的栈指针，用于指向当前栈帧的栈顶，用于访问局部变量和函数参数（除了 <strong>FP</strong>，这个也可以访问到函数参数）。<strong>SP</strong>是指向栈顶的，所以访问数据通常是做减法：</p>

<ul>
  <li><strong>x-8(SP)</strong></li>
  <li><strong>y-4(SP)</strong></li>
  <li><strong>-8(SP)</strong></li>
</ul>

<p>注意，这里的两个不同语法。在有 <strong>SP</strong>寄存器的机器上，带有一个名称前缀的语法表示访问Golang虚拟的SP寄存器，而不带名称前缀的则是访问硬件的SP寄存器。</p>

<h2 id="寻址模式">寻址模式</h2>

<p>说到汇编，就不得不提到寻址模式。Plan 9汇编的寻址模式挺多的，具体的可以看<a href="https://9p.io/sys/doc/asm.html">A Manual for Plan 9 assembler</a>。这里我们列举一些常用的：</p>

<ul>
  <li><em>$con</em> 常量</li>
  <li><em>$fcon</em> 浮点数常量</li>
  <li><em>name+o(SB)</em> 外部符号</li>
  <li><em>name&lt;&gt;+o(SB)</em> 本地符号</li>
  <li><em>name+o(FP)</em> 函数参数</li>
  <li><em>$name+o(SB)</em> 外部符号地址</li>
  <li><em>$name&lt;&gt;+o(SB)</em> 本地符号地址</li>
</ul>

<p><em>o</em>表示整数偏移量。</p>

<h2 id="指令">指令</h2>

<p>下面来介绍一下上文代码中的<code class="highlighter-rouge">foo()</code>函数的汇编代码中用到的汇编指令：</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="s2">""</span>.foo <span class="nv">t</span><span class="o">=</span>1 <span class="nv">size</span><span class="o">=</span>50 <span class="nv">args</span><span class="o">=</span>0x8 <span class="nv">locals</span><span class="o">=</span>0x10
        0x0000 00000 <span class="o">(</span>hello.go:7<span class="o">)</span>       TEXT    <span class="s2">""</span>.foo<span class="o">(</span>SB<span class="o">)</span>, <span class="nv">$16</span>-8
        0x0000 00000 <span class="o">(</span>hello.go:7<span class="o">)</span>       SUBQ    <span class="nv">$16</span>, SP
        0x0004 00004 <span class="o">(</span>hello.go:7<span class="o">)</span>       MOVQ    BP, 8<span class="o">(</span>SP<span class="o">)</span>
        0x0009 00009 <span class="o">(</span>hello.go:7<span class="o">)</span>       LEAQ    8<span class="o">(</span>SP<span class="o">)</span>, BP
        0x000e 00014 <span class="o">(</span>hello.go:7<span class="o">)</span>       FUNCDATA        <span class="nv">$0</span>, gclocals·5184031d3a32a42d85027f073f873668<span class="o">(</span>SB<span class="o">)</span>
        0x000e 00014 <span class="o">(</span>hello.go:7<span class="o">)</span>       FUNCDATA        <span class="nv">$1</span>, gclocals·33cdeccccebe80329f1fdbee7f5874cb<span class="o">(</span>SB<span class="o">)</span>
        0x000e 00014 <span class="o">(</span>hello.go:7<span class="o">)</span>       MOVQ    <span class="nv">$0</span>, <span class="s2">""</span>.~r0+24<span class="o">(</span>FP<span class="o">)</span>
        0x0017 00023 <span class="o">(</span>hello.go:8<span class="o">)</span>       MOVQ    <span class="nv">$0</span>, <span class="s2">""</span>.a<span class="o">(</span>SP<span class="o">)</span>
        0x001f 00031 <span class="o">(</span>hello.go:9<span class="o">)</span>       MOVQ    <span class="nv">$0</span>, <span class="s2">""</span>.~r0+24<span class="o">(</span>FP<span class="o">)</span>
        0x0028 00040 <span class="o">(</span>hello.go:9<span class="o">)</span>       MOVQ    8<span class="o">(</span>SP<span class="o">)</span>, BP
        0x002d 00045 <span class="o">(</span>hello.go:9<span class="o">)</span>       ADDQ    <span class="nv">$16</span>, SP
        0x0031 00049 <span class="o">(</span>hello.go:9<span class="o">)</span>       RET</code></pre></figure>

<div class="highlighter-rouge"><pre class="highlight"><code>TEXT "".foo(SB), $16-8
</code></pre>
</div>

<p><strong>TEXT</strong>是一个伪指令，表示定义一个入口点，也就是定义一个函数。它可以带三个参数：</p>

<ol>
  <li>第一个参数表示函数名，就是这里的<code class="highlighter-rouge">"".foo(SB)</code>。</li>
  <li>第二个参数是flag，这里没有体现出来，以后的文章再说。</li>
  <li>第三个参数是frame size，表示当前函数的栈帧大小以及参数大小，形式如同<code class="highlighter-rouge">$framesize-argsize</code>，减号前面是栈帧大小，减号后面是参数大小（包括返回值）。比如<code class="highlighter-rouge">$16-8</code>表示该函数栈帧大小为16，参数大小为8。</li>
</ol>

<div class="highlighter-rouge"><pre class="highlight"><code>SUBQ $16, SP
MOVQ BP, 8(SP)
LEAQ 8(SP), BP
</code></pre>
</div>

<p>这是一段入栈的代码。在这段代码执行前，<strong>SP</strong>指针指向调用函数，这里分配栈帧，并且保存函数返回地址，也就是 <strong>BP</strong>寄存器的内容到栈的开始部分，然后设置新的 <strong>BP</strong>寄存器的值。随后就可以开始执行这个函数了。</p>

<p><strong>BP</strong>寄存器是 <em>base pointer</em> ，一般用于指向当前栈帧的某个位置，和 <em>SP</em> 寄存器配合完成函数调用的操作。</p>

<p>这里的三个指令都是常用指令，格式都是源操作数在前，目标操作数在后：</p>

<ol>
  <li><strong>SUBQ</strong> 减</li>
  <li><strong>MOVQ</strong> 拷贝</li>
  <li><strong>LEAQ</strong> 载入有效地址。LEA的全称是 <em>Load Effective Address</em>，LEA指令计算源操作数所表示的地址的值，然后保存在目标操作数中。有时候LEA指令也会被用来进行简单的无符号计算（支持加、减、乘）。关于LEA指令的更多资料，可以看这里<a href="https://en.wikibooks.org/wiki/X86_Assembly/Data_Transfer">X86 Assembly/Data Transfer</a>。</li>
</ol>

<div class="highlighter-rouge"><pre class="highlight"><code>FUNCDATA        $0, gclocals·5184031d3a32a42d85027f073f873668(SB)
FUNCDATA        $1, gclocals·33cdeccccebe80329f1fdbee7f5874cb(SB)
</code></pre>
</div>

<p>这两行是用于保存GC所需要的数据。相关指定以后再介绍。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>MOVQ $0, "".~r0+24(FP)
MOVQ $0, "".a(SP)
MOVQ $0, "".~r0+24(FP)
</code></pre>
</div>

<p>这里没有新的指令，赋值操作实现了返回<code class="highlighter-rouge">a</code>变量。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>MOVQ 8(SP), BP
ADDQ $16, SP
</code></pre>
</div>

<p>这些是出栈的代码，通过把 <em>SP</em> 寄存器和 <em>BP</em> 寄存器设置为调用函数的值来完成返回。</p>


    <br />
    <div>
      <!-- aThis Button BEGIN -->
      <div class="jiathis_style_32x32">
        <a class="jiathis_button_tsina"></a>
        <a class="jiathis_button_twitter"></a>
        <a class="jiathis_button_googleplus"></a>
        <a class="jiathis_button_weixin"></a>
        <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
      </div>
      <script type="text/javascript" >
var jiathis_config={
  sm:"tsina,weixin,twitter,googleplus",
  summary:"",
  shortUrl:false,
  hideMore:true
}
      </script>
      <script type="text/javascript" src="http://v3.jiathis.com/code_mini/jia.js" charset="utf-8"></script>
      <!-- JiaThis Button END -->
    </div>
    <div>
      <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/80x15.png" /></a>本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可。
    </div>
  </div>
  <div class="post-comment">
    <div id="github_comment"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
var gitment = new Gitment({
  id: '', // 可选。默认为 location.href
  owner: 'diabloneo',
  repo: 'diabloneo.github.io',
  oauth: {
    client_id: '8f2d2ba263397201b0fe',
    client_secret: 'ef93ce4166bbd6977cc29828d18151722c81877c',
  },
})
gitment.render('container')
</script>

  </div>

</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Coffee, Coke and Code</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Coffee, Coke and Code</li>
          <li><a href="mailto:diabloneo@gmail.com">diabloneo@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/diabloneo"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">diabloneo</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/diabloneo"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">diabloneo</span></a>

          </li>
          

          
          <li>
            <a href="https://weibo.com/diabloneo"><span class="icon icon--weibo"><?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1506693756610" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1461" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M36.795021 82.536808 36.795021 82.536808 36.795021 82.536808Z" p-id="1462"></path><path d="M704.237279 523.521404c-9.210779-1.846044-15.190981-4.604878-17.941628-8.278547-2.749624-3.672646-3.210112-7.05058-1.384533-10.133801l2.769067-4.595668c0.607844-0.608867 1.226944-1.530866 1.855254-2.769067 0.62831-1.237177 1.855254-3.848655 3.682879-7.835456 1.826602-3.987824 3.211135-7.973602 4.1536-11.961426 0.942465-3.986801 1.708921-8.895601 2.297322-14.728446 0.589424-5.832845 0.431835-11.361769-0.470721-16.58677-0.903579-5.225001-2.749624-10.900258-5.539156-17.027815-2.790556-6.127558-6.628978-11.656481-11.519358-16.585747-8.601912-8.601912-19.806091-14.129812-33.613562-16.585747-13.807471-2.454912-27.613918-2.611477-41.421388-0.470721-13.806447 2.142803-26.847461 4.901637-39.122019 8.278547-12.274558 3.377934-22.398126 6.598278-30.372751 9.664104l-11.960403 5.538133c-6.147 1.846044-11.213389 3.074012-15.201214 3.682879-3.987824 0.60989-7.060813 0.453325-9.219989-0.470721-2.160199-0.923022-3.848655-1.846044-5.068436-2.768043-1.218758-0.923022-1.680269-3.072989-1.384533-6.451946 0.296759-3.377934 0.599657-6.294356 0.912789-8.749268 0.313132-2.452865 1.078565-6.293333 2.297322-11.519358 1.217734-5.226025 2.14178-9.369392 2.768043-12.432147 0-7.364735-0.461511-14.267958-1.384533-20.709671-0.923022-6.441713-2.916423-13.649881-5.981225-21.623483-3.063779-7.973602-7.512091-14.415314-13.345959-19.326161-5.833869-4.910846-13.198603-8.896624-22.095227-11.960403-8.896624-3.063779-20.406772-3.986801-34.527374-2.769067-14.121626 1.218758-30.079062 4.900613-47.873334 11.04659-21.485337 7.364735-43.275619 18.254759-65.369823 32.67212-22.094204 14.415314-41.273009 29.449729-57.534368 45.101197-16.261359 15.652492-31.149441 30.843472-44.661176 45.573965-13.511735 14.731516-23.950482 26.701129-31.315216 35.912931l-10.133801 14.728446c-20.249183 26.397207-35.282574 52.79339-45.102221 79.187527-9.819646 26.396183-14.424524 46.340421-13.81668 59.83476l0 19.326161c3.693112 29.458939 12.746302 55.855122 27.161616 79.187527 14.415314 23.331381 31.599695 42.205241 51.55519 56.620555 19.955494 14.415314 43.434232 26.689872 70.437236 36.82572 27.004027 10.133801 52.937676 17.498536 77.804017 22.095227 24.864294 4.595668 51.103912 7.816013 78.716806 9.664104 45.426609 3.692089 92.533486 0.166799 141.317563-10.57587 48.786123-10.744715 94.202499-29.313629 136.25322-55.708789 42.049698-26.396183 71.666226-58.006112 88.849584-94.830809 10.429537-21.48636 15.800871-41.74373 16.116049-60.776202 0.315178-19.031449-2.907213-34.527374-9.664104-46.486754-6.756891-11.960403-15.507182-22.546505-26.248827-31.758308-10.741645-9.211802-20.866237-15.968693-30.372751-20.268626-9.506515-4.299933-17.941628-7.059789-25.305339-8.278547L704.237279 523.521404 704.237279 523.521404zM423.455361 809.841455c-66.284659 3.064802-122.592083-9.829879-168.924317-38.680974-46.330188-28.851095-69.495794-65.370847-69.494771-109.561301 0-43.579541 23.01825-81.170694 69.053726-112.772436 46.036499-31.600719 102.500489-48.942689 169.394015-52.02591 66.893526-3.082198 123.358539 7.964392 169.392992 33.141818 46.036499 25.177426 69.053726 59.546188 69.053726 103.108333 0 44.190455-23.478737 83.931574-70.438259 119.224382-46.958498 35.291784-102.962 54.470589-168.009482 57.533344L423.455361 809.841455 423.455361 809.841455zM396.765489 554.806945c-17.793248 1.846044-33.750685 5.990434-47.873334 12.432147-14.121626 6.442736-25.168216 13.807471-33.140795 22.095227-7.972579 8.28878-14.728446 17.185404-20.268626 26.689872-5.539156 9.505491-9.378601 18.86465-11.519358 28.075429-2.140757 9.210779-3.524267 17.646915-4.1536 25.306362-0.630357 7.659447-0.933255 13.638625-0.913812 17.940604l0.913812 7.365758 0 3.682879c0 1.846044 0.618077 5.5279 1.855254 11.04659 1.237177 5.519714 2.925632 10.587126 5.067412 15.202237 2.14178 4.615111 5.66707 9.682523 10.57587 15.201214 4.909823 5.51869 10.743692 10.124592 17.499559 13.81668 40.517809 19.639293 78.264505 25.619494 113.243157 17.940604 34.977629-7.67889 63.209624-25.324782 84.695984-52.937676 8.601912-10.428513 14.278191-23.322172 17.028838-38.680974s2.131547-30.853705-1.855254-46.486754c-3.987824-15.634072-10.891048-29.90203-20.709671-42.805922-9.818623-12.902868-24.39255-22.880103-43.719734-29.930683-19.326161-7.05058-41.577954-9.045003-66.756403-5.981225L396.765489 554.806945 396.765489 554.806945zM363.621625 728.827327c-3.692089 0.607844-7.217379 0.765433-10.57587 0.470721-3.358491-0.293689-6.431479-0.913812-9.219989-1.855254-2.789533-0.941442-5.548366-2.01182-8.278547-3.210112-2.729158-1.197268-5.027503-2.885723-6.892991-5.067412-1.864464-2.180666-3.553942-4.331655-5.067412-6.451946-1.51347-2.12029-2.741437-4.576225-3.682879-7.364735-0.942465-2.790556-1.403976-5.705955-1.384533-8.749268 0-6.756891 1.846044-13.355169 5.538133-19.796882 3.692089-6.441713 8.759501-11.970636 15.201214-16.58677 6.441713-4.615111 13.649881-7.227612 21.624507-7.836479 5.51869-0.607844 10.890025-0.451278 16.115026 0.471744 5.225001 0.921999 9.673313 2.453888 13.345959 4.595668 3.672646 2.14178 6.894014 4.596691 9.664104 7.365758 2.77009 2.768043 4.76349 5.989411 5.981225 9.66308 1.216711 3.674693 1.835811 7.661494 1.855254 11.961426 0 6.755868-1.9934 13.19758-5.981225 19.325138-3.986801 6.128581-9.358135 11.343349-16.115026 15.643282-6.756891 4.299933-14.121626 6.755868-22.095227 7.365758L363.621625 728.827327 363.621625 728.827327zM441.86771 662.542668c-4.300956 3.063779-8.750291 4.448312-13.346983 4.1536-4.595668-0.294712-7.816013-2.288113-9.66308-5.981225l-1.856277-3.682879c-0.607844-1.237177-0.912789-2.465145-0.912789-3.682879l0-3.682879c0-1.846044 0.304945-3.377934 0.912789-4.596691l1.856277-3.682879c0.607844-1.237177 1.530866-2.160199 2.768043-2.768043l2.768043-3.682879c4.910846-3.693112 9.664104-5.225001 14.258749-4.596691 4.595668 0.629333 7.816013 3.084245 9.664104 7.365758 1.845021 2.454912 2.610454 5.214768 2.296299 8.278547-0.314155 3.063779-1.237177 5.980201-2.768043 8.749268-1.531889 2.769067-3.52529 5.380544-5.981225 7.835456L441.86771 662.542668 441.86771 662.542668zM768.695337 470.110961c3.692089 0 7.071046-0.923022 10.133801-2.769067 3.063779-1.845021 5.51869-4.143367 7.364735-6.891967 1.847068-2.750647 3.075035-5.66707 3.682879-8.749268 0.608867-0.608867 0.913812-1.531889 0.913812-2.769067 7.363711-69.976748-17.186428-109.874433-73.650417-119.695103-16.576537-3.063779-31.925107-3.367701-46.045709-0.912789-4.300956 0-7.983835 1.070378-11.04659 3.210112-3.063779 2.140757-5.676279 4.898567-7.836479 8.278547-2.160199 3.377934-3.230578 6.904247-3.210112 10.57587 0 6.147 2.15099 11.360745 6.451946 15.642259 4.300956 4.281513 9.515724 6.432503 15.643282 6.451946 47.88152-11.056823 73.658603 4.290723 77.331249 46.045709 1.237177 10.428513 0.618077 20.24816-1.855254 29.458939 0 6.148024 2.15099 11.361769 6.451946 15.643282 4.299933 4.281513 9.515724 6.432503 15.642259 6.451946L768.695337 470.110961 768.695337 470.110961zM753.052055 210.510458c-27.005051-6.147-63.22088-4.919033-108.648512 3.683902-0.607844 0-1.226944 0.303922-1.855254 0.912789l-0.912789 1.855254-0.912789 0.912789c-6.755868 1.846044-12.284791 5.685489-16.585747 11.519358-4.300956 5.833869-6.450922 12.128225-6.450922 18.883069 0 9.210779 3.072989 16.880459 9.219989 23.008017 6.147 6.128581 13.511735 9.201569 22.095227 9.219989l2.768043 0c0.608867 0 1.9934-0.303922 4.154623-0.912789 2.160199-0.607844 4.457522-1.070378 6.891967-1.384533 2.435469-0.314155 5.046946-0.932232 7.836479-1.855254 2.788509-0.923022 5.244444-1.846044 7.365758-2.769067 2.12029-0.921999 6.264681-1.384533 12.432147-1.384533 6.167466 0 13.688767 0.462534 22.565948 1.384533 8.877181 0.923022 18.697851 3.221368 29.459962 6.892991 10.763135 3.672646 21.505803 8.278547 32.229029 13.81668 10.723226 5.53711 21.465894 13.20679 32.229029 23.008017 10.763135 9.800203 20.122293 21.152762 28.075429 34.054607 15.96767 36.21583 19.041682 71.204715 9.219989 104.965633 0 0.608867-0.156566 1.227967-0.470721 1.856277-0.314155 0.62831-0.774643 2.160199-1.38351 4.595668-0.608867 2.435469-1.227967 4.732791-1.855254 6.892991-0.629333 2.160199-1.24741 4.919033-1.856277 8.278547-0.608867 3.358491-0.912789 6.274914-0.912789 8.749268 0 5.51869 1.531889 10.123568 4.596691 13.815657 3.063779 3.692089 6.904247 6.304589 11.519358 7.836479 4.615111 1.531889 9.987468 2.297322 16.115026 2.296299 17.185404 0 27.309996-10.438747 30.372751-31.31624 7.364735-23.940249 11.509125-46.801932 12.432147-68.581981 0.924045-21.782096-0.607844-40.958854-4.595668-57.534368-3.987824-16.575514-9.968026-32.072463-17.941628-46.487777-7.972579-14.415314-17.184381-26.690896-27.633361-36.823674-10.447956-10.133801-22.11467-19.34458-34.998095-27.633361-12.883425-8.287757-25.315572-14.887059-37.296441-19.796882-11.979846-4.909823-24.411993-8.896624-37.295418-11.960403L753.052055 210.508411 753.052055 210.510458z" p-id="1463"></path></svg></span><span class="username">diabloneo</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Archive diabloneo's articles.
</p>
      </div>
    </div>

  </div>

</footer>

    
      <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-78067453-1', 'auto');
  ga('send', 'pageview');

</script>

    
  </body>

</html>
